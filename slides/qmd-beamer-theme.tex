% COLOR SETTING ================================================================
% \definecolor{myblue}{HTML}{191970} % 13286B
% \definecolor{myred}{HTML}{B22222}
% \definecolor{myorange}{HTML}{FFAC1C}
% \definecolor{mygrey}{HTML}{2D2D2D}
\definecolor{mygrey}{HTML}{303E4E}
% \definecolor{illiniblue}{HTML}{13294B}  % From website
\definecolor{illiniblue}{HTML}{172949}
\definecolor{ucladarkblue}{HTML}{003B5C}
% \definecolor{illiniorange}{HTML}{FF5F05}  % From website
\definecolor{illiniorange}{HTML}{ED692D}
\definecolor{white}{HTML}{F8FAFC}
\definecolor{uclaorange}{HTML}{FFB81C}


% \usepackage{enumitem, enumerate}
\usepackage{setspace}

% \thispagestyle{empty}
% \setbeamertemplate{navigation symbols}{}
% \setbeamertemplate{footline}[frame number]{}
% \setbeamerfont{footline}{size=\scriptsize}


\setbeamercolor{normal text}{fg=mygrey}
\setbeamercolor{palette primary}{bg=ucladarkblue,fg=white}
\setbeamercolor{palette secondary}{bg=ucladarkblue,fg=white}
\setbeamercolor{palette tertiary}{bg=ucladarkblue,fg=white}
\setbeamercolor{palette quaternary}{bg=ucladarkblue,fg=white}
\setbeamercolor{structure}{fg=ucladarkblue} % itemize, enumerate, etc
\setbeamercolor{section in toc}{fg=ucladarkblue} % TOC sections
\setbeamercolor{frametitle}{fg=white, bg=ucladarkblue}
\setbeamercolor{section title}{fg=ucladarkblue}
\setbeamercolor{sectionpage title}{fg=ucladarkblue}


% FONT SETTING =================================================================
% \usepackage[T1]{fontenc}
% \usepackage{fontspec}



% \usepackage[utf8]{inputenc}
% \setmainfont{Minion Pro}
% \setsansfont[ItalicFont={PT Sans Italic},%
%              BoldFont={PT Sans Bold},%
%              BoldItalicFont={PT Sans Bold Italic}]{PT Sans Regular}

\usefonttheme{professionalfonts} % using non standard fonts for beamer



% \setmainfont{PT Sans Regular}
% \setsansfont[ItalicFont={PT Sans Italic},%
%              BoldFont={PT Sans Bold},%
%              BoldItalicFont={PT Sans Bold Italic}]{PT Sans Regular}
% \setmainfont{Minion 3 Regular}
% ItalicFont={Minion 3 Italic},%
% BoldFont={Minion 3 Bold},%
% BoldItalicFont={Minion 3 Bold Italic}]{Minion 3 Regular}

% \setmainfont[Numbers={Lining,Proportional,OldStyle}]{Source Sans Pro}
% \setsansfont[
% Numbers={Lining,Proportional,OldStyle},%
% ItalicFont={Source Sans Pro Italic},%
% BoldFont={Source Sans Pro Bold},%
% BoldItalicFont={Source Sans Pro Bold Italic}
% ]{Source Sans Pro}

% \setmainfont{Raleway}[
%   Extension=.otf,
%   UprightFont=*-Light,
%   ItalicFont=*-Light-Italic,
%   BoldFont=*-Bold,
%   BoldItalicFont=*-Bold-Italic,
% ]
% \setsansfont{Raleway}[
%   Extension=.otf,
%   UprightFont=*-Light,
%   ItalicFont=*-Light-Italic,
%   BoldFont=*-Bold,
%   BoldItalicFont=*-Bold-Italic,
% ]

% \setmathfont[Scale=0.9]{latinmodern-math.otf}
% \setmathfont[%
% range={it/{latin,Latin,num}->sfit,%
%   up/{latin,Latin,num}->sfup,%
%   bfup/{latin,Latin,num}->bfsfup,
%   bfit/{latin,Latin,num}->bfsfit,
%   bb, frak, cal, scr, sfup, sfit, bfcal},
%   version=sf]{latinmodern-math.otf}
 
% \setmathfont[math-style=upright, range={"00-"FF,
%         "03C0, "2013-"2014, "2018-"201A, "201C-"201E, "2021-"2022,
%         "2026, "2030, "2039-"203A, "2044, "20AC, "20BA, "20BD,
%         "2113, "2122, "2126, "212E, "2202, "2206, "2208, "220F,
%         "2212, "2215, "221E, "222B, "2246, "2260, "2264, "2265, "02211,
%         "25CA, up/{Latin,latin,num,Greek,greek}},Scale=0.85]{Fira Math Book}
% \setmathfont[Scale=0.85]{Fira Math Book}
% \setmathfont[range={"58-"60},Scale=0.9]{latinmodern-math.otf}
% \setmathfontface\mathbf{Fira Math Bold}
% \setmathfont[range={"005B,"005D,"0028,"0029,"007B,"007C,"007D,"2208,
% "02264,"02265,"02A7D,"02A7E,"25B6,"00028,"00029,"0223C},Scale=0.9]{Minion Math}
% \usepackage{amsmath}
% \usepackage{amssymb}




% \setmathfont[Scale=0.90]{Fira Math Light}
% \setmathfont[Scale=0.95]{Minion Math}
% \setmathfontface\mathbf[Scale=0.9]{Minion Math Bold}
% \setmathfont[Scale=0.9]{GFS Neohellenic Math}
% \setmathfontface\mathbf[Scale=0.9]{GFS Neohellenic Bold}
% \setmonofont[Scale=0.85]{Ubuntu Mono}
% \setmonofont[Scale=0.85]{Fira Code}
% \newfontfamily\compthin{Ubuntu Light}

% \newfontfamily\compthick{Minion 3 Bold}
% \newfontfamily\compthin{Minion 3 Regular}

% \newfontfamily\compthick{Fira Sans Condensed Bold}
% \newfontfamily\compthin{Source Sans Pro Light}

% \newfontfamily{\compthick}{Fira-Sans-Condensed-Bold.otf}

% \newfontfamily\myfont{Fira Sans Condensed Bold}

% \newfontfamily{\compthin}{Raleway-Light.otf}

% \setbeamerfont{frametitle}{family=\compthick, size={\fontsize{20}{20}}}
% \setbeamerfont{title}{family=\compthick, size={\fontsize{24}{24}}}
% \setbeamerfont{subtitle}{family=\compthick, size={\fontsize{24}{24}}}
% \setbeamerfont{author}{family=\compthin, size={\fontsize{10}{10}}}
% \setbeamerfont{date}{family=\compthin, size={\fontsize{10}{10}}}
% \setbeamerfont{institute}{family=\compthin, size={\fontsize{10}{10}}}
% \setbeamerfont{section number}{family=\compthick, size={\fontsize{20}{20}}}
% \setbeamerfont{section title}{family=\compthick, size={\fontsize{24}{24}}}
% \setbeamerfont{structure}{family=\compthick} % TOC section



\setbeamerfont{frametitle}{series=\bfseries, size={\fontsize{18}{18}}}
\setbeamerfont{title}{series=\bfseries, size={\fontsize{26}{26}}}
\setbeamerfont{subtitle}{series=\bfseries, size={\fontsize{16}{16}}}
\setbeamerfont{author}{size={\fontsize{8}{8}}}
\setbeamerfont{date}{size={\fontsize{8}{8}}}
\setbeamerfont{institute}{size={\fontsize{8}{8}}}
\setbeamerfont{section number}{size={\fontsize{20}{20}}}
\setbeamerfont{section title}{size={\fontsize{24}{24}}}

% CUSTOM COMMAND ===============================================================
\renewcommand{\qed}{\hfill\square}
\newcommand*{\key}[1]{\textbf{\textcolor{ucladarkblue}{#1}}}
% \newcommand*{\keyy}[1]{\textbf{\textcolor{myred}{#1}}}
% \newcommand*{\keyyy}[1]{\textbf{\textcolor{myorange}{#1}}}

% Renew pause command for math mode 
% https://topanswers.xyz/tex?q=1126
\makeatletter
\renewrobustcmd{\beamer@@pause}[1][]{%
  \unless\ifmeasuring@%
  \ifblank{#1}%
    {\stepcounter{beamerpauses}}%
    {\setcounter{beamerpauses}{#1}}%
  \onslide<\value{beamerpauses}->\relax%
  \fi%
}
\makeatother

% TITLE PAGE ===================================================================
% From Matthew Blackwell's template
% https://github.com/mattblackwell/cousteau
\RequirePackage{etoolbox}
\RequirePackage{tikz}

\setbeamertemplate{title page}
{
\vbox{}
\vfill
\ifx\inserttitle\@empty\else\usebeamertemplate*{title}\fi
\ifx\insertsubtitle\@empty\else\usebeamertemplate*{subtitle}\fi
\ifx\beamer@shortauthor\@empty\else\usebeamertemplate*{author}\fi
\ifx\insertinstitute\@empty\else\usebeamertemplate*{institute}\fi
\ifx\insertdate\@empty\else\usebeamertemplate*{date}\fi
\vfill
}

\setbeamertemplate{title}{
  \raggedright%
  \usebeamerfont{title}%
  \usebeamercolor[fg]{title}%
  \inserttitle
  \par%
}

\setbeamertemplate{subtitle}{
  \raggedright%
  \usebeamerfont{subtitle}%
  \usebeamercolor[fg]{subtitle}%
  \insertsubtitle
  \par%
  \vspace*{2em}
}

\setbeamertemplate{author}{
  \usebeamerfont{author}%
  \usebeamercolor[fg]{author}%
  \insertauthor
  \par%
  % \vspace*{0.25em}
  \vspace*{-0.2em}
}

\setbeamertemplate{institute}{
  \insertinstitute
  \par%
  % \vspace*{0.25em}
  \vspace*{-0.2em}
}

\setbeamertemplate{date}{
  % \vspace*{-0.2em}
  \insertdate
  \par%
  \vspace*{-0.2em}
}

% ==============================================================================
% \setbeamertemplate{section page}
% {
%     \setbeamercolor{background canvas}{fg=ucladarkblue}
%       \begin{centering}
%       % \usebeamercolor[fg=ucladarkblue]{section title}
%       % \usebeamerfont{section title}
%        \insertsection
%       \par
%       \end{centering}
% }

\addtobeamertemplate{navigation symbols}{}{%
    \usebeamerfont{footline}%
    \usebeamercolor[fg]{footline}%
    \hspace{1em}%
    \insertframenumber/\inserttotalframenumber
}

\setbeamertemplate{frametitle}
{
    \nointerlineskip
    \begin{beamercolorbox}[sep=0.35cm,ht=1.5em,wd=\paperwidth]{frametitle}
        \vbox{}\vskip-0.8ex%
        \strut\insertframetitle\strut
        \vskip-0.8ex%
    \end{beamercolorbox}
}

\setbeamercolor{section page}{fg=ucladarkblue}
\setbeamertemplate{itemize items}[circle]



\usepackage{amsmath,amssymb}
\let\svmathcal\mathcal
\DeclareSymbolFontAlphabet{\mathcal}   {symbols}
\DeclareMathAlphabet{\mathcal}{OMS}{cmsy}{m}{n}
\SetMathAlphabet{\mathcal}{bold}{OMS}{cmsy}{b}{n}

\newcommand{\indep}{\perp \!\!\! \perp}



\newlength\origleftmargini
\setlength\origleftmargini\leftmargini
\setbeamertemplate{itemize/enumerate body begin}{\setlength{\leftmargini}{0pt}}


\let\oldalertblock\alertblock
\let\oldendalertblock\endalertblock
\def\alertblock{\begingroup \setbeamertemplate{itemize/enumerate body begin}{\setlength{\leftmargini}{\origleftmargini}} \oldalertblock}
\def\endalertblock{\oldendalertblock \endgroup}

% \setbeamertemplate{section page}{\vspace{4cm} \usebeamercolor[fg]{section number}\usebeamerfont{section number} \insertsectionnumber/ \usebeamercolor[fg]{section title}\usebeamerfont{section title} \textcolor{ucladarkblue}{\text{\insertsection}}}

% \settowidth{\leftmargini}{\usebeamertemplate{itemize item}}
% \addtolength{\leftmargini}{\labelsep}

% \defbeamertemplate*{section page}{default}[1][] 
% {
%   \begingroup
%     \centering
%     {\usebeamerfont{section name}\usebeamercolor[fg]{section name}\sectionname~\insertsectionnumber}
%     \vskip1em\par
%     \begin{beamercolorbox}[sep=12pt,center,#1]{part title}
%       \usebeamerfont{section title}\insertsection\par
%     \end{beamercolorbox}
%   \endgroup
% }





